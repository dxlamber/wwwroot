<!DOCTYPE html>
<html>
<head>
	<title>An Lisp interpretation by Javascript</title>
	<meta charset="UTF-8">
	<link href="/lib/bootstrap/css/bootstrap.css" rel="stylesheet" media="screen">
</head>
<body>
 <p>Test Lisp Expression:</p>
 <div><textarea id="simpleExp" style="height:100px; width:300px;">(+ 12 23)</textarea></div>
 <div><button onclick="calcSimpleExp();">计算</button></div>
</body>
<script src="/lib/jquery/jquery.js"></script>
<script src="/lib/bootstrap/js/bootstrap.js"></script>
<script src="autofsm.js"></script>
<script src="computeobj.js"></script>
<script type="text/javascript">
var GlobalEnv = {};
GlobalEnv.add = function(){
 return [].reduce.call(arguments, function(pv, cv){return pv+cv;}, 0);
};
GlobalEnv.mult = function(){
 debugger;
 return [].reduce.call(arguments, function(pv, cv){return pv*cv;}, 1);
};
GlobalEnv.minus = function(){
 if(arguments.length != 2)
 {
	debugger;
	return;
 }
	
 return arguments[0] - arguments[1];
};
GlobalEnv.div = function(){
 if(arguments.length != 2)
 {
	debugger;
	return;
 }
	
 return arguments[0] / arguments[1];
};
GlobalEnv.note = function(obj){
 return obj.toNote();
};
</script>

<script type="text/javascript">
function constructAST(wordArr, syntaxRules)
{
	var tmpObj = null;
	for(var nextPos = 0; nextPos < wordArr.length;)
	{
		var curWord = wordArr[i];
		for(var p in syntaxRules)
		{
			/*if current parsed word match syntaxRules[p]
				分解当前元素为一个可计算对象。
			*/
			/*else 
			*/
		}
	}
		
	return tmpObj;
};
function getList(startPos, wordArr)
{
	var tmpList = null;
	tmpList = new Exp();
	return tmpList;
};
function getAtom(startPos, wordArr)
{
	return new Atom(wordArr[0].val);
};

function calcSimpleExp()
{
	/*var str = $("#simpleExp").val();
	var inputL = str.split('\n').pop();
	var v = (inputL[0] == '(' ? new Exp(inputL) : new Atom(inputL));
	$("#simpleExp").val(str + "\n" + v.getVal());*/
	
	debugger;
	
	var strLisp = '(* 3 (- 4 2))';
	var blockArr = LispAutoFsm.removeSeparator(LispAutoFsm.parseWord(strLisp));
	debugger;
};
</script>
</html>